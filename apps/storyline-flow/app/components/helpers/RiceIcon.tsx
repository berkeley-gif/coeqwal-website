import React, { useId } from "react"

interface IconProps {
  fillPercentage?: number
  size?: number
  style?: React.CSSProperties
  reversed?: boolean
}

//TODO: figure out scaling
function RiceIcon({
  fillPercentage = 100,
  size = 50,
  reversed = false,
  style,
}: IconProps) {
  const id = useId()

  // Calculate the clip width based on the fillPercentage and the SVG width (50)
  const clipWidth = (fillPercentage / 100) * size
  const clipID = `clip-${id}`
  const start = Math.min(clipWidth, size - clipWidth)
  const end = Math.max(clipWidth, size - clipWidth)

  return (
    <svg
      width={size}
      height={size}
      viewBox={`0 0 ${size} ${size}`}
      style={{ display: "block", ...style }}
    >
      <defs>
        <clipPath id={clipID}>
          {reversed ? (
            <rect x={start} y="0" width={end} height={size} />
          ) : (
            <rect x="0" y="0" width={clipWidth} height={size} />
          )}
        </clipPath>
      </defs>
      <path
        d="M1.38929 50.5C1.74484 50.5 2.09983 50.3644 2.3715 50.0933L8.90863 43.5555H9.62362C16.3274 43.5555 22.6301 40.9449 27.3706 36.2043C27.7678 35.8071 27.8867 35.2098 27.6717 34.6909C27.5928 34.5004 27.4739 34.3348 27.3284 34.2009C29.8895 32.9842 32.2505 31.3242 34.315 29.2598C34.7122 28.8625 34.8311 28.2653 34.6161 27.7464C34.5372 27.5559 34.4183 27.3903 34.2727 27.2564C36.8338 26.0397 39.1949 24.3797 41.2593 22.3152C41.6565 21.918 41.7754 21.3208 41.5604 20.8019C41.4815 20.6113 41.3627 20.4458 41.2171 20.3119C43.7782 19.0952 46.1393 17.4352 48.2037 15.3707C48.6009 14.9735 48.7198 14.3763 48.5048 13.8574C48.2903 13.3379 47.7837 12.9996 47.222 12.9996H43.3515C44.2304 12.2096 44.9876 11.2707 45.5787 10.2062L49.8253 2.5628C50.1264 2.02057 50.0314 1.34501 49.5931 0.90667C49.1559 0.468332 48.4792 0.373887 47.937 0.674445L40.2932 4.92116C39.2288 5.51228 38.2899 6.26951 37.5005 7.14841V3.27725C37.5005 2.71558 37.1621 2.20891 36.6433 1.9939C36.1227 1.77835 35.5266 1.89835 35.1294 2.29502C33.065 4.35949 31.405 6.72062 30.1884 9.28176C30.0545 9.13621 29.8889 9.01732 29.6989 8.93843C29.1784 8.72231 28.5823 8.84231 28.185 9.23954C26.1206 11.304 24.4607 13.6651 23.244 16.2263C23.1101 16.0807 22.9446 15.9618 22.7546 15.8829C22.2346 15.6668 21.6379 15.7874 21.2407 16.1841C19.1763 18.2485 17.5163 20.6097 16.2996 23.1708C16.1658 23.0252 16.0002 22.9064 15.8102 22.8275C15.2897 22.6119 14.6941 22.7319 14.2963 23.1286C9.55529 27.8692 6.94477 34.172 6.94477 40.8766V41.5916L0.407078 48.1289C-0.135693 48.6711 -0.135693 49.5505 0.407078 50.0928C0.678741 50.3644 1.03374 50.5 1.38929 50.5ZM41.6415 7.34896L45.0359 5.46283L43.1498 8.85731C41.9837 10.9562 39.9554 12.4024 37.6477 12.8512C38.0971 10.544 39.5427 8.51509 41.6415 7.34896ZM36.686 15.7774H43.4521C40.2677 18.0674 36.5538 19.4652 32.6228 19.8408L36.686 15.7774ZM34.7222 7.04729V13.8135L30.6589 17.8769C31.0345 13.9457 32.4322 10.2318 34.7222 7.04729ZM29.7417 22.7219H30.4567H36.5077C33.3233 25.0119 29.6095 26.4097 25.6784 26.7853L29.7417 22.7219ZM27.7778 13.9918V20.043V20.758L23.7146 24.8214C24.0901 20.8902 25.4879 17.1763 27.7778 13.9918ZM22.7973 29.6664H23.5123H29.5634C26.379 31.9565 22.6651 33.3543 18.7341 33.7298L22.7973 29.6664ZM20.8335 20.9363V26.9875V27.7025L16.7702 31.7659C17.1457 27.8347 18.5435 24.1208 20.8335 20.9363ZM15.853 36.611H16.568H22.619C19.4346 38.901 15.7208 40.2988 11.7897 40.6743L15.853 36.611ZM13.8891 27.8809V33.932V34.647L9.82584 38.7104C10.2014 34.7793 11.5992 31.0653 13.8891 27.8809Z"
        fill="white"
        clipPath={`url(#${clipID})`}
      />
    </svg>
  )
}

export default RiceIcon
